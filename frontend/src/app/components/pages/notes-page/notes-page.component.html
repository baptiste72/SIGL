<app-navigation>
  <div class="navigation-content">
    <mat-card class="notes-page-card">
      <mat-card-header class="notes-page-card-header">
        <mat-card-title class="notes-page-card-title">
          <mat-icon
            aria-hidden="false"
            aria-label="notes icon"
            fontIcon="edit_note"
          ></mat-icon>
          NOTES PÉRIODIQUES
        </mat-card-title>
      </mat-card-header>

      <mat-card-content class="note-page-content">
        <div class="tree-div">
          <button
            class="btn_primary bg-green"
            mat-button
            (click)="openDialog(note)"
          >
            AJOUTER UNE NOTE
          </button>
          <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
            <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
              <button mat-icon-button></button>
              {{ node.name }}
            </mat-tree-node>
            <mat-tree-node
              *matTreeNodeDef="let node; when: hasChild"
              matTreeNodePadding
            >
              <button
                mat-icon-button
                matTreeNodeToggle
                [attr.aria-label]="'Toggle ' + node.id"
              >
                <mat-icon class="mat-icon-rtl-mirror">
                  {{
                    treeControl.isExpanded(node)
                      ? "expand_more"
                      : "chevron_right"
                  }}
                </mat-icon>
                <button>
                  {{ node.name }}
                </button>
              </button>
            </mat-tree-node>
            <mat-tree-node
              *matTreeNodeDef="let node; when: hasNoContent"
              matTreeNodePadding
            >
              <button mat-button (click)="getNote(node.id)">
                {{ node.name }}
              </button>
            </mat-tree-node>
          </mat-tree>
        </div>
        <div class="note-card-div">
          <mat-card class="note-card">
            <mat-card-title>{{ note.title }}</mat-card-title>
            <mat-card-content>
              <div *ngIf="isAvailable">
                Du {{ note.dateStart | date: "shortDate" }} au
                {{ note.dateEnd | date: "shortDate" }}
                <br />
                <br />
              </div>
              <span style="white-space: pre-line">{{ note.text }}</span>
            </mat-card-content>
            <mat-card-content *ngIf !="isAvailable">
              <span style="white-space: pre-line">Sélectionner une note</span>
            </mat-card-content>
            <mat-card-actions class="note-card-actions">
              <button
                mat-icon-button
                *ngIf="isAvailable"
                class="btn-modify-note green"
                (click)="openModifyDialog()"
              >
                <mat-icon>edit</mat-icon>MODIFIER
              </button>
              <button
                mat-icon-button
                *ngIf="isAvailable"
                class="btn-delete-note red"
                (click)="openDeleteDialog()"
              >
                <mat-icon>close</mat-icon>SUPPRIMER
              </button>
            </mat-card-actions>
          </mat-card>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</app-navigation>
